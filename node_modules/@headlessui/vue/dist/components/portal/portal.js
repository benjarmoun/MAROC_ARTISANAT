import{Teleport as P,defineComponent as s,h as y,inject as T,onUnmounted as h,provide as E,reactive as w,ref as f,watchEffect as C,computed as b}from"vue";import{render as d}from"../../utils/render.js";import{usePortalRoot as j}from"../../internal/portal-force-root.js";import{getOwnerDocument as v}from"../../utils/owner.js";function c(t){let r=v(t);if(!r){if(t===null)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${t}`)}let o=r.getElementById("headlessui-portal-root");if(o)return o;let e=r.createElement("div");return e.setAttribute("id","headlessui-portal-root"),r.body.appendChild(e)}let R=s({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:r,attrs:o}){let e=f(null),p=b(()=>v(e)),n=j(),u=T(g,null),l=f(n===!0||u==null?c(e.value):u.resolveTarget());return C(()=>{n||u!=null&&(l.value=u.resolveTarget())}),h(()=>{var i,m;let a=(i=p.value)==null?void 0:i.getElementById("headlessui-portal-root");!a||l.value===a&&l.value.children.length<=0&&((m=l.value.parentElement)==null||m.removeChild(l.value))}),()=>{if(l.value===null)return null;let a={ref:e};return y(P,{to:l.value},d({props:{...t,...a},slot:{},attrs:o,slots:r,name:"Portal"}))}}}),g=Symbol("PortalGroupContext"),L=s({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(t,{attrs:r,slots:o}){let e=w({resolveTarget(){return t.target}});return E(g,e),()=>{let{target:p,...n}=t;return d({props:n,slot:{},attrs:r,slots:o,name:"PortalGroup"})}}});export{R as Portal,L as PortalGroup};
